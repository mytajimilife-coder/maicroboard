// ë‹¤êµ­ì–´ ì§€ì› ë°ì´í„°
const translations = {
    en: {
        title: "MicroBoard - A Journey Through Digital Space",
        heroTitle: "MicroBoard",
        heroSubtitle: "A Journey Through Digital Space",
        versionBadge: "ğŸŒŸ Version 1.0.0",
        aboutTitle: "ğŸŒŒ About MicroBoard",
        aboutDescription: "MicroBoard is a lightweight, high-performance bulletin board system designed for simplicity and ease of use. Built with modern PHP standards, it offers a robust platform for community engagement without the complexity of larger systems.",
        featuresTitle: "âœ¨ Key Features",
        feature1Title: "ğŸš€ Lightweight & Fast",
        feature1Desc: "Optimized performance with minimal resource usage",
        feature2Title: "ğŸŒ Multilingual Support",
        feature2Desc: "Built-in support for Korean, English, Japanese, and Chinese",
        feature3Title: "ğŸ”’ Secure by Design",
        feature3Desc: "CSRF protection, prepared statements, and session security",
        feature4Title: "ğŸ“± Responsive Design",
        feature4Desc: "Works perfectly on desktop, tablet, and mobile devices",
        oauthTitle: "ğŸ” OAuth Social Login",
        oauthDescription: "Seamless integration with popular OAuth providers:",
        oauthGoogle: "Google Login",
        oauthLine: "LINE Login",
        oauthApple: "Apple Sign In",
        quickstartTitle: "ğŸš€ Quick Start",
        quickstartStep1: "Clone the repository",
        quickstartStep2: "Upload to your web server",
        quickstartStep3: "Run the installation wizard",
        quickstartStep4: "Configure your board settings",
        quickstartStep5: "Start building your community!",
        adminTitle: "âš™ï¸ Admin Features",
        adminFeature1: "User Management",
        adminFeature2: "Board Configuration",
        adminFeature3: "OAuth Settings",
        adminFeature4: "Point System",
        licenseTitle: "ğŸ“œ License",
        licenseDescription: "MicroBoard is open-source software licensed under the MIT License.",
        copyright: "Â© 2025 MicroBoard Team. All rights reserved.",
        footerTagline: "A Journey Through Digital Space",
        footerMadeWith: "Made with â¤ï¸ by MicroBoard Team | Version 1.0.0",
        github: "ğŸš€ GitHub",
        features: "â­ Features",
        docs: "ğŸ“– Docs",
        download: "â¬‡ï¸ Download"
    },
    ko: {
        title: "MicroBoard - ë””ì§€í„¸ ê³µê°„ìœ¼ë¡œì˜ ì—¬ì •",
        heroTitle: "MicroBoard",
        heroSubtitle: "ë””ì§€í„¸ ê³µê°„ìœ¼ë¡œì˜ ì—¬ì •",
        versionBadge: "ğŸŒŸ ë²„ì „ 1.0.0",
        aboutTitle: "ğŸŒŒ MicroBoard ì†Œê°œ",
        aboutDescription: "MicroBoardëŠ” ë‹¨ìˆœì„±ê³¼ ì‚¬ìš© í¸ì˜ì„±ì„ ìœ„í•´ ì„¤ê³„ëœ ê²½ëŸ‰ ê³ ì„±ëŠ¥ ê²Œì‹œíŒ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. í˜„ëŒ€ì ì¸ PHP í‘œì¤€ìœ¼ë¡œ êµ¬ì¶•ë˜ì–´ ëŒ€í˜• ì‹œìŠ¤í…œì˜ ë³µì¡ì„± ì—†ì´ ì»¤ë®¤ë‹ˆí‹° ì°¸ì—¬ë¥¼ ìœ„í•œ ê°•ë ¥í•œ í”Œë«í¼ì„ ì œê³µí•©ë‹ˆë‹¤.",
        featuresTitle: "âœ¨ ì£¼ìš” ê¸°ëŠ¥",
        feature1Title: "ğŸš€ ê°€ë³ê³  ë¹ ë¦„",
        feature1Desc: "ìµœì†Œí•œì˜ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ìœ¼ë¡œ ìµœì í™”ëœ ì„±ëŠ¥",
        feature2Title: "ğŸŒ ë‹¤êµ­ì–´ ì§€ì›",
        feature2Desc: "í•œêµ­ì–´, ì˜ì–´, ì¼ë³¸ì–´, ì¤‘êµ­ì–´ ê¸°ë³¸ ì§€ì›",
        feature3Title: "ğŸ”’ ë³´ì•ˆ ì„¤ê³„",
        feature3Desc: "CSRF ë³´í˜¸, ì¤€ë¹„ëœ ëª…ë ¹ë¬¸ ë° ì„¸ì…˜ ë³´ì•ˆ",
        feature4Title: "ğŸ“± ë°˜ì‘í˜• ë””ìì¸",
        feature4Desc: "ë°ìŠ¤í¬í†±, íƒœë¸”ë¦¿, ëª¨ë°”ì¼ ê¸°ê¸°ì—ì„œ ì™„ë²½í•˜ê²Œ ì‘ë™",
        oauthTitle: "ğŸ” OAuth ì†Œì…œ ë¡œê·¸ì¸",
        oauthDescription: "ì¸ê¸° ìˆëŠ” OAuth ì œê³µì—…ì²´ì™€ì˜ ì›í™œí•œ í†µí•©:",
        oauthGoogle: "êµ¬ê¸€ ë¡œê·¸ì¸",
        oauthLine: "ë¼ì¸ ë¡œê·¸ì¸",
        oauthApple: "ì• í”Œ ë¡œê·¸ì¸",
        quickstartTitle: "ğŸš€ ë¹ ë¥¸ ì‹œì‘",
        quickstartStep1: "ì €ì¥ì†Œ ë³µì œ",
        quickstartStep2: "ì›¹ ì„œë²„ì— ì—…ë¡œë“œ",
        quickstartStep3: "ì„¤ì¹˜ ë§ˆë²•ì‚¬ ì‹¤í–‰",
        quickstartStep4: "ê²Œì‹œíŒ ì„¤ì • êµ¬ì„±",
        quickstartStep5: "ì»¤ë®¤ë‹ˆí‹° êµ¬ì¶• ì‹œì‘!",
        adminTitle: "âš™ï¸ ê´€ë¦¬ì ê¸°ëŠ¥",
        adminFeature1: "ì‚¬ìš©ì ê´€ë¦¬",
        adminFeature2: "ê²Œì‹œíŒ êµ¬ì„±",
        adminFeature3: "OAuth ì„¤ì •",
        adminFeature4: "í¬ì¸íŠ¸ ì‹œìŠ¤í…œ",
        licenseTitle: "ğŸ“œ ë¼ì´ì„ ìŠ¤",
        licenseDescription: "MicroBoardëŠ” MIT ë¼ì´ì„ ìŠ¤ì— ë”°ë¼ ë¼ì´ì„ ìŠ¤ê°€ ë¶€ì—¬ëœ ì˜¤í”ˆ ì†ŒìŠ¤ ì†Œí”„íŠ¸ì›¨ì–´ì…ë‹ˆë‹¤.",
        copyright: "Â© 2025 MicroBoard Team. ëª¨ë“  ê¶Œë¦¬ ë³´ìœ .",
        footerTagline: "ë””ì§€í„¸ ê³µê°„ìœ¼ë¡œì˜ ì—¬ì •",
        footerMadeWith: "MicroBoard Teamì´ â¤ï¸ë¡œ ë§Œë“¦ | ë²„ì „ 1.0.0",
        github: "ğŸš€ GitHub",
        features: "â­ ê¸°ëŠ¥",
        docs: "ğŸ“– ë¬¸ì„œ",
        download: "â¬‡ï¸ ë‹¤ìš´ë¡œë“œ"
    },
    ja: {
        title: "MicroBoard - ãƒ‡ã‚¸ã‚¿ãƒ«ç©ºé–“ã¸ã®æ—…",
        heroTitle: "MicroBoard",
        heroSubtitle: "ãƒ‡ã‚¸ã‚¿ãƒ«ç©ºé–“ã¸ã®æ—…",
        versionBadge: "ğŸŒŸ ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.0.0",
        aboutTitle: "ğŸŒŒ MicroBoardã«ã¤ã„ã¦",
        aboutDescription: "MicroBoardã¯ã€ã‚·ãƒ³ãƒ—ãƒ«ã•ã¨ä½¿ã„ã‚„ã™ã•ã‚’é‡è¦–ã—ã¦è¨­è¨ˆã•ã‚ŒãŸè»½é‡ã§é«˜æ€§èƒ½ãªæ²ç¤ºæ¿ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚æœ€æ–°ã®PHPæ¨™æº–ã§æ§‹ç¯‰ã•ã‚Œã¦ãŠã‚Šã€å¤§è¦æ¨¡ã‚·ã‚¹ãƒ†ãƒ ã®è¤‡é›‘ã•ãªã—ã«ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆã®ãŸã‚ã®å …ç‰¢ãªãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’æä¾›ã—ã¾ã™ã€‚",
        featuresTitle: "âœ¨ ä¸»ãªæ©Ÿèƒ½",
        feature1Title: "ğŸš€ è»½é‡ã§é«˜é€Ÿ",
        feature1Desc: "æœ€å°é™ã®ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨ã§æœ€é©åŒ–ã•ã‚ŒãŸãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹",
        feature2Title: "ğŸŒ å¤šè¨€èªã‚µãƒãƒ¼ãƒˆ",
        feature2Desc: "éŸ“å›½èªã€è‹±èªã€æ—¥æœ¬èªã€ä¸­å›½èªã®çµ„ã¿è¾¼ã¿ã‚µãƒãƒ¼ãƒˆ",
        feature3Title: "ğŸ”’ ã‚»ã‚­ãƒ¥ã‚¢ãªè¨­è¨ˆ",
        feature3Desc: "CSRFä¿è­·ã€ãƒ—ãƒªãƒšã‚¢ãƒ‰ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£",
        feature4Title: "ğŸ“± ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³",
        feature4Desc: "ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã€ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã€ãƒ¢ãƒã‚¤ãƒ«ãƒ‡ãƒã‚¤ã‚¹ã§å®Œç’§ã«å‹•ä½œ",
        oauthTitle: "ğŸ” OAuthã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³",
        oauthDescription: "äººæ°—ã®ã‚ã‚‹OAuthãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¨ã®ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªçµ±åˆ:",
        oauthGoogle: "Googleãƒ­ã‚°ã‚¤ãƒ³",
        oauthLine: "LINEãƒ­ã‚°ã‚¤ãƒ³",
        oauthApple: "Appleã§ã‚µã‚¤ãƒ³ã‚¤ãƒ³",
        quickstartTitle: "ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ",
        quickstartStep1: "ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³",
        quickstartStep2: "Webã‚µãƒ¼ãƒãƒ¼ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰",
        quickstartStep3: "ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œ",
        quickstartStep4: "æ²ç¤ºæ¿è¨­å®šã‚’æ§‹æˆ",
        quickstartStep5: "ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£æ§‹ç¯‰ã‚’é–‹å§‹ï¼",
        adminTitle: "âš™ï¸ ç®¡ç†è€…æ©Ÿèƒ½",
        adminFeature1: "ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†",
        adminFeature2: "æ²ç¤ºæ¿è¨­å®š",
        adminFeature3: "OAuthè¨­å®š",
        adminFeature4: "ãƒã‚¤ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ",
        licenseTitle: "ğŸ“œ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹",
        licenseDescription: "MicroBoardã¯MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸‹ã§ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã•ã‚ŒãŸã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã§ã™ã€‚",
        copyright: "Â© 2025 MicroBoard Team. å…¨è‘—ä½œæ¨©æ‰€æœ‰ã€‚",
        footerTagline: "ãƒ‡ã‚¸ã‚¿ãƒ«ç©ºé–“ã¸ã®æ—…",
        footerMadeWith: "MicroBoard TeamãŒâ¤ï¸ã§ä½œæˆ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.0.0",
        github: "ğŸš€ GitHub",
        features: "â­ æ©Ÿèƒ½",
        docs: "ğŸ“– ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ",
        download: "â¬‡ï¸ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰"
    },
    zh: {
        title: "MicroBoard - æ•°å­—ç©ºé—´ä¹‹æ—…",
        heroTitle: "MicroBoard",
        heroSubtitle: "æ•°å­—ç©ºé—´ä¹‹æ—…",
        versionBadge: "ğŸŒŸ ç‰ˆæœ¬ 1.0.0",
        aboutTitle: "ğŸŒŒ å…³äº MicroBoard",
        aboutDescription: "MicroBoardæ˜¯ä¸€ä¸ªè½»é‡çº§ã€é«˜æ€§èƒ½çš„å…¬å‘Šæ¿ç³»ç»Ÿï¼Œä¸“ä¸ºç®€å•æ€§å’Œæ˜“ç”¨æ€§è€Œè®¾è®¡ã€‚é‡‡ç”¨ç°ä»£PHPæ ‡å‡†æ„å»ºï¼Œä¸ºç¤¾åŒºå‚ä¸æä¾›å¼ºå¤§çš„å¹³å°ï¼Œè€Œæ— éœ€å¤§å‹ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚",
        featuresTitle: "âœ¨ ä¸»è¦åŠŸèƒ½",
        feature1Title: "ğŸš€ è½»é‡å¿«é€Ÿ",
        feature1Desc: "ä»¥æœ€å°‘çš„èµ„æºä½¿ç”¨ä¼˜åŒ–æ€§èƒ½",
        feature2Title: "ğŸŒ å¤šè¯­è¨€æ”¯æŒ",
        feature2Desc: "å†…ç½®éŸ©è¯­ã€è‹±è¯­ã€æ—¥è¯­å’Œä¸­æ–‡æ”¯æŒ",
        feature3Title: "ğŸ”’ å®‰å…¨è®¾è®¡",
        feature3Desc: "CSRFä¿æŠ¤ã€é¢„å¤„ç†è¯­å¥å’Œä¼šè¯å®‰å…¨",
        feature4Title: "ğŸ“± å“åº”å¼è®¾è®¡",
        feature4Desc: "åœ¨æ¡Œé¢ã€å¹³æ¿å’Œç§»åŠ¨è®¾å¤‡ä¸Šå®Œç¾è¿è¡Œ",
        oauthTitle: "ğŸ” OAuthç¤¾äº¤ç™»å½•",
        oauthDescription: "ä¸æµè¡Œçš„OAuthæä¾›å•†æ— ç¼é›†æˆï¼š",
        oauthGoogle: "Googleç™»å½•",
        oauthLine: "LINEç™»å½•",
        oauthApple: "Appleç™»å½•",
        quickstartTitle: "ğŸš€ å¿«é€Ÿå¼€å§‹",
        quickstartStep1: "å…‹éš†å­˜å‚¨åº“",
        quickstartStep2: "ä¸Šä¼ åˆ°WebæœåŠ¡å™¨",
        quickstartStep3: "è¿è¡Œå®‰è£…å‘å¯¼",
        quickstartStep4: "é…ç½®è®ºå›è®¾ç½®",
        quickstartStep5: "å¼€å§‹æ„å»ºç¤¾åŒºï¼",
        adminTitle: "âš™ï¸ ç®¡ç†åŠŸèƒ½",
        adminFeature1: "ç”¨æˆ·ç®¡ç†",
        adminFeature2: "è®ºå›é…ç½®",
        adminFeature3: "OAuthè®¾ç½®",
        adminFeature4: "ç§¯åˆ†ç³»ç»Ÿ",
        licenseTitle: "ğŸ“œ è®¸å¯è¯",
        licenseDescription: "MicroBoardæ˜¯æ ¹æ®MITè®¸å¯è¯æˆæƒçš„å¼€æºè½¯ä»¶ã€‚",
        copyright: "Â© 2025 MicroBoard Team. ç‰ˆæƒæ‰€æœ‰ã€‚",
        footerTagline: "æ•°å­—ç©ºé—´ä¹‹æ—…",
        footerMadeWith: "ç”±MicroBoard Teamç”¨â¤ï¸åˆ¶ä½œ | ç‰ˆæœ¬ 1.0.0",
        github: "ğŸš€ GitHub",
        features: "â­ åŠŸèƒ½",
        docs: "ğŸ“– æ–‡æ¡£",
        download: "â¬‡ï¸ ä¸‹è½½"
    }
};

// ë¸Œë¼ìš°ì € ì–¸ì–´ ê°ì§€
function detectBrowserLanguage() {
    const browserLang = navigator.language || navigator.userLanguage;
    const langCode = browserLang.split('-')[0];
    
    // ì§€ì›í•˜ëŠ” ì–¸ì–´ì¸ì§€ í™•ì¸
    if (translations[langCode]) {
        return langCode;
    }
    
    // ê¸°ë³¸ê°’ì€ ì˜ì–´
    return 'en';
}

// ì–¸ì–´ ë³€ê²½ í•¨ìˆ˜
function changeLanguage(lang) {
    // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
    localStorage.setItem('preferredLanguage', lang);
    
    // í˜ì´ì§€ ë¦¬ë‹¤ì´ë ‰íŠ¸
    if (lang === 'en') {
        window.location.href = 'index.html';
    } else {
        window.location.href = `index-${lang}.html`;
    }
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ ì–¸ì–´ ì„¤ì •
function initLanguage() {
    // ì €ì¥ëœ ì–¸ì–´ ì„ í˜¸ë„ í™•ì¸
    const savedLang = localStorage.getItem('preferredLanguage');
    
    if (savedLang) {
        return savedLang;
    }
    
    // ë¸Œë¼ìš°ì € ì–¸ì–´ ê°ì§€
    return detectBrowserLanguage();
}

// ì–¸ì–´ ì„ íƒê¸° ì´ˆê¸°í™”
function initLanguageSelector(currentLang) {
    const selector = document.getElementById('language-selector');
    if (selector) {
        selector.value = currentLang;
        selector.addEventListener('change', (e) => {
            changeLanguage(e.target.value);
        });
    }
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ë¦¬ë‹¤ì´ë ‰íŠ¸
window.addEventListener('DOMContentLoaded', () => {
    const currentPage = window.location.pathname.split('/').pop();
    
    // index.htmlì¸ ê²½ìš°ì—ë§Œ ìë™ ë¦¬ë‹¤ì´ë ‰íŠ¸
    if (currentPage === 'index.html' || currentPage === '') {
        const preferredLang = initLanguage();
        
        // ì˜ì–´ê°€ ì•„ë‹ˆê³  ì•„ì§ ë¦¬ë‹¤ì´ë ‰íŠ¸ë˜ì§€ ì•Šì€ ê²½ìš°
        if (preferredLang !== 'en' && !sessionStorage.getItem('languageRedirected')) {
            sessionStorage.setItem('languageRedirected', 'true');
            changeLanguage(preferredLang);
        }
    }
    
    // í˜„ì¬ ì–¸ì–´ ê°ì§€ ë° ì„ íƒê¸° ì´ˆê¸°í™”
    let currentLang = 'en';
    if (currentPage.includes('index-ko')) currentLang = 'ko';
    else if (currentPage.includes('index-ja')) currentLang = 'ja';
    else if (currentPage.includes('index-zh')) currentLang = 'zh';
    
    initLanguageSelector(currentLang);
});
